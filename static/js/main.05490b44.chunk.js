(this.webpackJsonpdishes_by_codencja=this.webpackJsonpdishes_by_codencja||[]).push([[0],{149:function(e,t,a){var n={"./pizza.jpg":150,"./sandwich.jpg":151,"./soup.jpg":152};function c(e){var t=o(e);return a(t)}function o(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}c.keys=function(){return Object.keys(n)},c.resolve=o,e.exports=c,c.id=149},150:function(e,t,a){"use strict";a.r(t),t.default=a.p+"static/media/pizza.bba134e7.jpg"},151:function(e,t,a){"use strict";a.r(t),t.default=a.p+"static/media/sandwich.45375517.jpg"},152:function(e,t,a){"use strict";a.r(t),t.default=a.p+"static/media/soup.eae9ab6c.jpg"},153:function(e,t,a){"use strict";a.r(t);var n=a(3),c=a.n(n),o=a(39),s=a.n(o),r=(a(48),a(14)),i=a.n(r),l=a(9),d=a(40),u=a(42),p=a(0),b=a(43),j=a(2);function O(e){var t=Object(n.useContext)(R),a=t.onState,c=t.onAddToInputRef,o=t.onChanging,s=a.type,r=a.outputStyle,i=a.loading,l=e.onTagType,d=e.onTitle,u=e.onName,p=e.onType,O=e.onID,m=e.onClass,f=e.onPlaceHold,h=e.onStep,y=e.onAria,_=e.onRequired,v=e.onDataSizing,g=e.onMin,k=e.onMax,x=e.onPattern,T=e.onOptionNames,N=Object(n.useMemo)((function(){return"select"===l&&Object(b.a)(T).map((function(e,t){return"default"===e?Object(j.jsx)("option",{defaultValue:!0,hidden:!0,label:" ",children:"select an option"},t):Object(j.jsx)("option",{value:e,children:e},t)}))}),[s]),S=Object(n.useMemo)((function(){return Object(j.jsx)("div",{className:"form-group input-cont",children:Object(j.jsxs)("div",{className:"input-block",children:[Object(j.jsx)("label",{htmlFor:u,children:d}),Object(j.jsx)("select",{className:m,name:u,"aria-label":y,id:O,required:_,ref:c,value:a[u].val,onChange:o,children:N})]})})}),[s,i]),F=Object(n.useMemo)((function(){return Object(j.jsx)("div",{className:"form-group input-cont",children:Object(j.jsxs)("div",{className:"input-block",children:[Object(j.jsx)("label",{htmlFor:u,children:d}),Object(j.jsx)("input",{type:p,placeholder:f,className:m,name:u,"aria-label":y,id:O,step:h,required:_,"data-sizing":v,min:g,max:k,pattern:x,ref:c,value:a[u].val,onChange:o,onKeyDown:o})]})})}),[a]),w=Object(n.useMemo)((function(){return Object(j.jsx)("div",{className:"form-group input-cont",children:Object(j.jsxs)("div",{className:"input-block",children:[Object(j.jsx)("label",{htmlFor:u,children:d}),Object(j.jsx)("input",{type:p,placeholder:f,className:m,name:u,"aria-label":y,id:O,step:h,required:_,"data-sizing":v,min:g,max:k,pattern:x,ref:c,value:a[u].val,onChange:o,onKeyDown:o}),Object(j.jsx)("output",{className:"bubble",style:r,children:a[u].val})]})})}),[a]);return Object(j.jsx)(j.Fragment,{children:"input"===l?F:"select"===l?S:w})}var m=c.a.memo(O);function f(e){var t=e.msgResponse,a=e.onAddToFeedbackRef;return Object(j.jsx)("div",{className:"invalid-feedback",ref:a,children:"ok"===t?"":t})}var h=c.a.memo(f),y=c.a.forwardRef((function(e,t){var a=e.onType,c=e.onSubmit,o=Object(n.useContext)(R),s=o.onAddToFeedbackRef.addToFeedbackRef,r=o.onState,i=r.name,l=r.preparation_time,d=r.type,u=r.no_of_slices,p=r.diameter,b=r.spiciness_scale,O=r.slices_of_bread,f=Object(j.jsxs)("div",{children:[Object(j.jsx)(m,{onTagType:"input",onTitle:"No of slices",onName:"no_of_slices",onType:"number",onID:"no_of_slices",onClass:"form-control",onPlaceHold:null,onStep:1,onAria:"no_of_slices",onRequired:"pizza"===a,onDataSizing:null,onMin:1,onMax:null}),Object(j.jsx)(h,{msgResponse:u.check,onAddToFeedbackRef:s}),Object(j.jsx)(m,{onTagType:"input",onTitle:"diameter",onName:"diameter",onType:"number",onID:"diameter",onClass:"form-control",onPlaceHold:null,onStep:.1,onAria:"diameter",onRequired:"pizza"===a,onDataSizing:null,onMin:.1,onMax:null}),Object(j.jsx)(h,{msgResponse:p.check,onAddToFeedbackRef:s})]}),y=Object(j.jsxs)("div",{children:[Object(j.jsx)(m,{onTagType:"range",onTitle:"Spiciness scale",onName:"spiciness_scale",onType:"range",onID:"spiciness_scale",onClass:"form-control form-control-range",onPlaceHold:null,onStep:1,onAria:"spiciness_scale",onRequired:"soup"===a,onDataSizing:"px",onMin:1,onMax:10}),Object(j.jsx)(h,{msgResponse:b.check,onAddToFeedbackRef:s})]}),_=Object(j.jsxs)("div",{children:[Object(j.jsx)(m,{onTagType:"input",onTitle:"No of slices",onName:"slices_of_bread",onType:"number",onID:"slices_of_bread",onClass:"form-control",onPlaceHold:null,onStep:1,onAria:"slices_of_bread",onRequired:"sandwich"===a,onDataSizing:null,onMin:1,onMax:null}),Object(j.jsx)(h,{msgResponse:O.check,onAddToFeedbackRef:s})]});return Object(j.jsxs)("form",{id:"dishes-form",children:[Object(j.jsxs)("div",{className:"row center",children:[Object(j.jsx)(m,{onTagType:"input",onTitle:"Dish name",onName:"name",onType:"text",onID:"name",onClass:"form-control",onPlaceHold:"Type dish name",onStep:null,onAria:"name",onRequired:!0,onDataSizing:null,onMin:null,onMax:null,onPattern:null}),Object(j.jsx)(h,{msgResponse:i.check,onAddToFeedbackRef:s}),Object(j.jsx)(m,{onTagType:"input",onTitle:"Preparation time",onName:"preparation_time",onType:"time",onID:"preparation_time",onClass:"form-control",onPlaceHold:null,onStep:1,onAria:"preparation_time",onRequired:!0,onDataSizing:null,onMin:null,onMax:null,onPattern:"[0-9]{2}:[0-9]{2}:[0-9]{2}"}),Object(j.jsx)(h,{msgResponse:l.check,onAddToFeedbackRef:s}),Object(j.jsx)(m,{onTagType:"select",onTitle:"Type",onName:"type",onID:"type",onClass:"form-control form-control-lg",onOptionNames:["default","pizza","soup","sandwich"],onPlaceHold:null,onAria:"type",onRequired:!0}),Object(j.jsx)(h,{msgResponse:d.check,onAddToFeedbackRef:s}),"pizza"===a?f:"soup"===a?y:"sandwich"===a?_:""]}),Object(j.jsx)("div",{className:"row center",children:Object(j.jsx)("div",{className:"buttons col",children:Object(j.jsx)("button",{type:"submit",className:"btn btn-check",ref:t,onClick:c,children:"Submit"})})})]})})),_=c.a.memo(y),v=(a(51),a(52),a(15)),g=a.n(v),k=function(e){var t=Object(n.useRef)([]),a=Object(n.useRef)(),c=function(e){return a.current="",e.length<8&&(e+=":00"),e<"00:15:00"&&(a.current="We need at least 15 min to prepare the dish!"),new RegExp(/^([0-9]|0[0-9]|1[0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9])$/).test(e)};return{onValidation:function(n,o){return t.current=[],new Promise((function(s,r){var i=0;for(var l in n){i++;var d=n[l].val.toString().split(" ").join("");if(d.length<=0)t.current.push(!1),e({type:"".concat(l,"_check"),payload:"This field has to be filled in"}),s(t.current);else switch(n[l].sort){case"text":g.a.isAlpha(d)?(t.current.push(!0),e({type:"".concat(l,"_check"),payload:"ok"})):(t.current.push(!1),e({type:"".concat(l,"_check"),payload:"Please use only letters"}));break;case"intNumber":case"floatNumber":g.a.isNumeric(d)?(t.current.push(!0),e({type:"".concat(l,"_check"),payload:"ok"})):(t.current.push(!1),e({type:"".concat(l,"_check"),payload:"Please use only numbers"}));break;case"time":c(d)?c(d)&&""!==a.current?(t.current.push(!1),e({type:"".concat(l,"_check"),payload:a.current})):(t.current.push(!0),e({type:"".concat(l,"_check"),payload:"ok"})):(t.current.push(!1),e({type:"".concat(l,"_check"),payload:"Please use only numbers in time format"}))}i>=o&&s(t.current)}}))}}},x=a(41),T=a.n(x),R=c.a.createContext(),N={name:{val:"",sort:"text",check:""},preparation_time:{val:"00:15:00",sort:"time",check:""},type:{val:"",sort:"text",check:""},no_of_slices:{val:1,sort:"intNumber",check:""},diameter:{val:.1,sort:"floatNumber",check:""},spiciness_scale:{val:1,sort:"intNumber",check:""},slices_of_bread:{val:1,sort:"intNumber",check:""},outputStyle:{left:"0%"},photoName:"",sizeOfSubmittedObject:0,validationFinished:"not",finalResponse:"",loading:!1,id:0},S=function(e,t){switch(t.type){case"name":return Object(p.a)(Object(p.a)({},e),{},{name:Object(p.a)(Object(p.a)({},e.name),{},{val:t.payload})});case"name_check":return Object(p.a)(Object(p.a)({},e),{},{name:Object(p.a)(Object(p.a)({},e.name),{},{check:t.payload})});case"preparation_time":return Object(p.a)(Object(p.a)({},e),{},{preparation_time:Object(p.a)(Object(p.a)({},e.preparation_time),{},{val:t.payload})});case"preparation_time_check":return Object(p.a)(Object(p.a)({},e),{},{preparation_time:Object(p.a)(Object(p.a)({},e.preparation_time),{},{check:t.payload})});case"type":return Object(p.a)(Object(p.a)({},e),{},{type:Object(p.a)(Object(p.a)({},e.type),{},{val:t.payload})});case"type_check":return Object(p.a)(Object(p.a)({},e),{},{type:Object(p.a)(Object(p.a)({},e.type),{},{check:t.payload})});case"no_of_slices":return Object(p.a)(Object(p.a)({},e),{},{no_of_slices:Object(p.a)(Object(p.a)({},e.no_of_slices),{},{val:parseInt(t.payload)})});case"no_of_slices_check":return Object(p.a)(Object(p.a)({},e),{},{no_of_slices:Object(p.a)(Object(p.a)({},e.no_of_slices),{},{check:t.payload})});case"diameter":return Object(p.a)(Object(p.a)({},e),{},{diameter:Object(p.a)(Object(p.a)({},e.diameter),{},{val:parseFloat(t.payload)})});case"diameter_check":return Object(p.a)(Object(p.a)({},e),{},{diameter:Object(p.a)(Object(p.a)({},e.diameter),{},{check:t.payload})});case"spiciness_scale":return Object(p.a)(Object(p.a)({},e),{},{spiciness_scale:Object(p.a)(Object(p.a)({},e.spiciness_scale),{},{val:parseInt(t.payload)})});case"spiciness_scale_check":return Object(p.a)(Object(p.a)({},e),{},{spiciness_scale:Object(p.a)(Object(p.a)({},e.spiciness_scale),{},{check:t.payload})});case"slices_of_bread":return Object(p.a)(Object(p.a)({},e),{},{slices_of_bread:Object(p.a)(Object(p.a)({},e.slices_of_bread),{},{val:parseInt(t.payload)})});case"slices_of_bread_check":return Object(p.a)(Object(p.a)({},e),{},{slices_of_bread:Object(p.a)(Object(p.a)({},e.slices_of_bread),{},{check:t.payload})});case"validationFinished":return Object(p.a)(Object(p.a)({},e),{},{validationFinished:t.payload});case"validationSuccess":return Object(p.a)(Object(p.a)({},e),{},{validationSuccess:t.payload});case"sizeOfSubmittedObject":return Object(p.a)(Object(p.a)({},e),{},{sizeOfSubmittedObject:t.payload});case"photo":return Object(p.a)(Object(p.a)({},e),{},{photoName:t.payload});case"outputStyle":return Object(p.a)(Object(p.a)({},e),{},{outputStyle:Object(p.a)(Object(p.a)({},e.outputStyle),{},{left:t.payload})});case"finalResponse":return Object(p.a)(Object(p.a)({},e),{},{finalResponse:t.payload});case"loading":return Object(p.a)(Object(p.a)({},e),{},{loading:t.payload});case"idIncrement":return Object(p.a)(Object(p.a)({},e),{},{id:parseInt(e.id)+1});case"reset":return Object(p.a)(Object(p.a)({},e),{},{name:Object(p.a)(Object(p.a)({},e.name),{},{val:""}),preparation_time:Object(p.a)(Object(p.a)({},e.preparation_time),{},{val:"00:15:00"}),type:Object(p.a)(Object(p.a)({},e.type),{},{val:""}),no_of_slices:Object(p.a)(Object(p.a)({},e.no_of_slices),{},{val:1}),diameter:Object(p.a)(Object(p.a)({},e.diameter),{},{val:.1}),slices_of_bread:Object(p.a)(Object(p.a)({},e.slices_of_bread),{},{val:1}),spiciness_scale:Object(p.a)(Object(p.a)({},e.spiciness_scale),{},{val:1}),photoName:""});default:return e}};var F=function(){var e=Object(n.useReducer)(S,N),t=Object(u.a)(e,2),c=t[0],o=t[1],s=k(o).onValidation,r=Object(n.useRef)([]),b=Object(n.useRef)([]),O=Object(n.useRef)({}),m=Object(n.useRef)(),f=Object(n.useRef)(),h=Object(n.useRef)(),y=Object(n.useRef)(),v=c.name,g=c.preparation_time,x=c.type,F=c.no_of_slices,w=c.diameter,z=c.spiciness_scale,C=c.slices_of_bread,A=c.photoName,D=c.validationFinished,I=c.finalResponse,L=c.outputStyle,P=c.loading,M=c.id;Object(n.useEffect)((function(){})),Object(n.useEffect)((function(){if("ok"===D){O.current=Object(p.a)(Object(p.a)({},O.current),{},{id:M}),O.current=JSON.stringify(O.current),console.log("Data to be send:"),console.log(O.current),h.current.classList.add("hidden","no-display"),r.current.forEach((function(e){e.classList.remove("inCorrect"),e.classList.add("correct")})),b.current.forEach((function(e){e.classList.add("afterValidation")}));var e={method:"POST",url:"https://frosty-wood-6558.getsandbox.com:443/dishes",headers:{"Content-type":"application/json"},data:O.current};m.current.classList.remove("bad"),m.current.classList.add("wait"),o({type:"loading",payload:!0}),y.current.disabled=!0,T()(e).then((function(e){console.log(e.data),O.current="",o({type:"loading",payload:!1}),m.current.classList.remove("wait"),m.current.classList.add("fine"),o({type:"reset",payload:""}),o({type:"finalResponse",payload:"Your order has been sent succefully!"}),y.current.disabled=!1})).catch((function(e){console.log(e.message),O.current="",o({type:"loading",payload:!1}),m.current.classList.remove("wait"),m.current.classList.add("bad"),o({type:"finalResponse",payload:e.message}),y.current.disabled=!1}))}}),[M]),Object(n.useEffect)((function(){"ok"===D?o({type:"idIncrement",payload:1}):"error"===D&&(m.current.classList.remove("fine"),m.current.classList.add("bad"),r.current.forEach((function(e){var t=e.getAttribute("name");"ok"===c[t].check?(e.classList.remove("inCorrect"),e.classList.add("correct")):(e.classList.remove("correct"),e.classList.add("inCorrect"))})),o({type:"finalResponse",payload:"There is a mistake!"}))}),[D]);var q=Object(n.useCallback)((function(e,t,a,n){var c=getComputedStyle(t.target),s=parseFloat(c.paddingLeft)+parseFloat(c.paddingRight),r=parseFloat(t.target.clientWidth-s);if(void 0!==t&&null!==t){var i=parseInt(t.target.getAttribute("min")-1),l=parseInt(t.target.getAttribute("max"));i<0&&(i*=-1);var d=(parseInt(e)+i)/(i+l)+n;return o({type:"outputStyle",payload:r*parseFloat(d)-7}),!1}}),[z,L]),E=function(e){return new Promise((function(t,a){var n={name:v,preparation_time:g,type:x};switch(e){case"pizza":t(Object(p.a)(Object(p.a)({},n),{},{no_of_slices:F,diameter:w}));break;case"soup":t(Object(p.a)(Object(p.a)({},n),{},{spiciness_scale:z}));break;case"sandwich":t(Object(p.a)(Object(p.a)({},n),{},{slices_of_bread:C}));break;default:t(Object(p.a)({},n))}}))},H=function(){var e=Object(d.a)(i.a.mark((function e(t){var a,n,c,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),o({type:"validationFinished",payload:"not"}),e.next=4,E(x.val);case 4:return a=e.sent,n=Object.keys(a).length,o({type:"sizeOfSubmittedObject",payload:n}),e.next=9,s(a,n);case 9:for(r in c=e.sent,a)O.current=Object(p.a)(Object(p.a)({},O.current),{},Object(l.a)({},r,a[r].val));c.every((function(e){return!0===e}))?o({type:"validationFinished",payload:"ok"}):o({type:"validationFinished",payload:"error"});case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=Object(n.useCallback)((function(e){e&&!b.current.includes(e)&&b.current.push(e)}),[]),J=Object(n.useCallback)((function(e){e&&!r.current.includes(e)&&r.current.push(e)}),[]);return Object(j.jsx)("div",{className:"App",children:Object(j.jsxs)("div",{className:"container",children:[Object(j.jsx)("h2",{className:"title",children:"Hungry? Let's order a delicious meal!"}),Object(j.jsxs)("div",{className:"dishes flex",ref:f,children:[Object(j.jsx)(R.Provider,{value:{onState:c,onDispatch:o,onChanging:function(e){if("not"!==D&&o({type:"finalResponse",payload:""}),o({type:e.target.name,payload:e.target.value}),"range"===e.target.type&&q(e.target.value,e,e.target.name,"px"),"type"===e.target.name)switch(h.current.classList.remove("hidden","no-display"),e.target.value){case"pizza":o({type:"photo",payload:"pizza"});break;case"soup":o({type:"photo",payload:"soup"});break;case"sandwich":o({type:"photo",payload:"sandwich"});break;default:o({type:"photo",payload:""})}},onAddToInputRef:J,onInputRef:r,onAddToFeedbackRef:V},children:Object(j.jsx)(_,{onType:x.val,onSubmit:H,ref:y})}),Object(j.jsx)("div",{className:"image hidden no-display",ref:h,children:Object(j.jsx)("img",{alt:A,className:"photo",src:""!==A?a(149)("./".concat(A,".jpg")).default:"",style:{height:"auto",width:"100%",objectFit:"contain"}})})]}),Object(j.jsx)("div",{className:"answer",ref:m,children:P?"Wait...":I})]})})},w=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,154)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,o=t.getLCP,s=t.getTTFB;a(e),n(e),c(e),o(e),s(e)}))};s.a.render(Object(j.jsx)(c.a.StrictMode,{children:Object(j.jsx)(F,{})}),document.getElementById("root")),w()},48:function(e,t,a){},51:function(e,t,a){},52:function(e,t,a){}},[[153,1,2]]]);
//# sourceMappingURL=main.05490b44.chunk.js.map